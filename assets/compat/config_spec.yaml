tor-address:
  name: Network Tor Address
  description: The Tor address for the network interface.
  type: pointer
  subtype: package
  package-id: btcpayserver
  target: tor-address
  interface: main
bitcoin:
  type: object
  name: Bitcoin Settings
  description: RPC and P2P interface configuration options for Bitcoin Core
  nullable: false
  spec:
    bitcoind-rpc:
      type: union
      name: Bitcoin Core RPC
      description: The Bitcoin Core node to connect to over the RPC interface
      tag:
        id: type
        name: Type
        variant-names:
          internal: Internal (Bitcoin Core)
          internal-proxy: Internal (Bitcoin Proxy)
        description: |
          The Bitcoin Core node to connect to:
            - internal: A full archival version of the Bitcoin Core service installed on your Embassy
            - internal-proxy: A pruned version of Bitcoin Core and the Bitcoin Proxy service installed on your Embassy
      default: internal-proxy
      variants:
        internal:
          rpc-user:
            type: pointer
            name: RPC Username
            description: The username for Bitcoin Core's RPC interface
            subtype: package
            package-id: bitcoind
            target: config
            multi: false
            selector: "$.rpc.username"
          rpc-password:
            type: pointer
            name: RPC Password
            description: The password for Bitcoin Core's RPC interface
            subtype: package
            package-id: bitcoind
            target: config
            multi: false
            selector: "$.rpc.password"
        internal-proxy:
          rpc-user:
            type: pointer
            name: RPC Username
            description: The username for Bitcoin Proxy's RPC user allocated to BTCPay
            subtype: package
            package-id: btc-rpc-proxy
            target: config
            multi: false
            selector: '$.users.[?(@.name == "btcpayserver")].name'
          rpc-password:
            type: pointer
            name: RPC Password
            description: The password Bitcoin Proxy's RPC user allocated to BTCPay
            subtype: package
            package-id: btc-rpc-proxy
            target: config
            multi: false
            selector: '$.users.[?(@.name == "btcpayserver")].password'
    bitcoind-p2p:
      type: union
      name: Bitcoin Core P2P
      description: The Bitcoin Core node to connect to over the peer-to-peer interface
      tag:
        id: type
        name: Type
        variant-names:
          internal: Internal
          external: External
        description: |
          The Bitcoin Core P2P node to connect to:
            - internal: The Bitcoin Core service installed on your Embassy
            - external: A Bitcoin Core node running on a different device
      default: internal
      variants:
        internal: {}
        external:
          p2p-host:
            type: string
            name: Public Address
            description: The public address of your Bitcoin Core server
            nullable: false
            pattern: '/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/'
            patternDescription: Must be a valid URL without a port specified
          p2p-port:
            type: number
            name: P2P Port
            description: The port that your Bitcoin Core P2P server is bound to
            nullable: false
            range: "[0,65535]"
            integral: true
            default: 8333
lightning:
  type: union
  tag:
    id: type
    name: Type
    description: Enables BTCPay to use the selected internal lightning node.
    variant-names:
      none: No selection
      c-lightning: C-Lightning
      lnd: LND
  name: Embassy Lightning Node
  description: Use this setting to grant BTCPay access to your Embassy's LND or c-lightning node. If you prefer to use an external Lightning node, or you do not intend to use Lightning, leave this setting blank. Please see the "Instructions" page for more details.
  default: none
  variants:
    none: {}
    lnd: {}
    c-lightning: {}
advanced:
  type: object
  name: Advanced Settings
  description: Advanced conifuration options to change if you know what you are doing
  nullable: false
  spec:
    sync-start-height:
      type: number
      nullable: false
      name: "Sync Start Height"
      description: "The block explorer within BTCPay will start scanning from the configured start height. This means that you might not see old payments from your HD key. If you need to see old payments, you need to configure the start height to a specific height of your choice. By default, this value is '-1', which is used to indicate the current stored blockchain height."
      range: "[-1,*)"
      integral: true
      default: -1
